<!-- saved from url=(0022)http://internet.e-mail -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0088)ftp://gill:p00p00p00@ftp.ai.mit.edu/home/leglab/gill/6.004/Fall98/problem_sets/p9-10.htm -->
<HTML><HEAD><TITLE>6.004 Problem Set 9-10, Fall 1998</TITLE>
<META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
<META content="Microsoft FrontPage 4.0" name=GENERATOR></HEAD>
<BODY>
<p align="center"><strong>How Computers Work</strong></p>
<p align="center"><strong>Problem Set 3</strong></p>
<P><STRONG>Problem 1</STRONG>:&nbsp; </P>
<P><EM>Finite State Machine Design </EM></P>
<P>Suppose we wish to measure the traffic at a point on the MBTA track, counting 
the axle crossings in each direction. We set up a two light beams just above the 
rails and place two photocells A and B some inches apart along the track. When 
the beam shines on a photocell it produces a 0, and when the beam is 
interrupted, it produces a 1. Thus, when an axle crosses straight through from 
left to right, we read the following signals from A and B: </P><PRE>00 -&gt; 10 -&gt; 11 -&gt; 01 -&gt; 00 </PRE>
<P>(and the reverse for the opposite direction). Unfortunately, trains my stop
with axles part way through, and due to driver's sometimes reversing the trains,
an axle may turn back after going part way through. </P>
<P>We wish to connect a synchronous finite-state machine taking its two inputs 
from A and B and producing two outputs X and Y such that: 
<UL>
  <LI>normally, both outputs are 0; 
  <LI>when an axle has crossed completely from left to right, X becomes 1 for 
  exactly one clock period; 
  <LI>when an axle has crossed completely from right to left, Y becomes 1 for 
  exactly one clock period. </LI></UL>
<P>(The pulses generated by X and Y could drive two counters, for example.) 
Assume that the only things that interrupt the light beams are axles, and that 
the clock is fast enough that we do not miss any transitions. We decide to 
design a Moore machine. </P>
<P><STRONG>A</STRONG>. Draw a state-transition diagram for this FSM. Clearly 
label the inputs and outputs. </P>
<P><STRONG>B</STRONG>. Construct the state-transition table for your FSM. </P>
<P><STRONG>C</STRONG>. Show an implementation for this FSM using D 
flip-flops and a ROM. </P>
<P><STRONG>D</STRONG>. Suppose we need to notify the maintenance department 
periodically about wear and tear on the track, and further that X and Y drive 
another FSM with one output that goes from 0 to 1 after 100,000 axle crossings 
(total, both directions). How many states must that FSM have? How many 
flip-flops would be needed to implement that FSM? </P>
<P><b>E.</b> Consider the line above:</P>
<BLOCKQUOTE>
  <P><I>Assume that the only things that interrupt the light beams are axles, and 
  that the clock is fast enough that we do not miss any 
transitions.</I></P></BLOCKQUOTE>
<P> What's wrong with this assumption?&nbsp; What else do you 
need to assume if your FSM is to work 
properly?</P>
<P><b>F.</b> Let's fix it by throwing one flip-flop on each of the 
inputs.&nbsp; What do you have to worry about now?</P>
<P><STRONG>Problem 2:</STRONG> </P>
<P> <EM>Another finite-state machine. </EM></P>
<P>Design a finite-state machine that takes two unsigned binary numbers A and B 
in serial form, most significant bit first, and produces two binary outputs GE 
and LT. If A is greater than or equal to B, then A appears on the GE line and B 
appears on the the LT line. If B is greater than or equal to A, then B appears 
on the GE line and A appears on the the LT line. </P>
<P><b>Problem 3:</b> </P>
<P><EM>Weighing in</EM></P>
<P>Ben Bitdiddle wasn't paying attention in lecture, and proudly shows you a 
device that can tell which of two weights is heavier than the other.&nbsp; When 
you look inside, you notice two digital scales wired to some circuitry.&nbsp; 
Ben notices your interest and shows you how it works:&nbsp; when you put the 
weights on the scales, the digital display lights up with the weight. Ben has 
connected each of the little LEDs from the scales to a bit of logic that 
determines which number is bigger.&nbsp; If the numbers are the same, then the 
device picks the weight on the left scale.</P>
<P>Ben points to the definition of a "perfect" arbiter (from the lecture, 
slightly edited):</P>
<BLOCKQUOTE>
  <P><FONT face=Arial,Helvetica size=2>For some finite W<SUB>margin</SUB> and 
  T<SUB>pd</SUB>, <BR>produce the correct answer if |W<SUB>a</SUB> - 
  W<SUB>b</SUB>| &gt; W<SUB>margin</SUB>, <BR>or any answer if |W<SUB>a</SUB> - 
  W<SUB>b</SUB>| &lt;= W<SUB>margin</SUB>, <BR>but produce <I>some</I> stable 
  answer within time T<SUB>pd</SUB>.</FONT></P></BLOCKQUOTE>
<P>Ben notes: "My T<SUB>pd</SUB> is just the time of the digital scales, plus a 
bit for my logic, and my W<SUB>margin</SUB> is just the accuracy of the digital 
scales. Therefore, this is a "perfect" arbiter! Ha ha!&nbsp; I'm gonna make a 
million bucks". </P>
<P> You notice Alyssa P. Hacker over in the corner, shaking 
her head and trying to suppress a smirk. What has she noticed?</P>
<P><b>Problem 4:</b></P>
<P><EM>Hazards </EM></P>
<P>For the following logical expression:</P><PRE>_ _   _ 
B.D + C.D + B.D + A.B.C </PRE>
<P>(i) draw the Karnaugh map, in the form:</P>
<TABLE width="45%" border=1>
  <TBODY>
  <TR>
    <TD 
    style="BORDER-RIGHT: medium none; BORDER-TOP: medium none; BORDER-LEFT: medium none; BORDER-BOTTOM: medium none" 
    width="16%" rowSpan=3>&nbsp;</TD>
    <TD 
    style="BORDER-RIGHT: medium none; BORDER-TOP: medium none; BORDER-LEFT: medium none; BORDER-BOTTOM: medium none" 
    width="33%" colSpan=2>&nbsp;</TD>
    <TD 
    style="BORDER-RIGHT: solid; BORDER-TOP: medium none; BORDER-LEFT: solid; BORDER-BOTTOM: solid" 
    width="34%" colSpan=2>
      <P align=center><STRONG>A</STRONG></P></TD>
    <TD 
    style="BORDER-RIGHT: medium none; BORDER-TOP: medium none; BORDER-LEFT: medium none; BORDER-BOTTOM: medium none" 
    width="17%">&nbsp;</TD></TR>
  <TR>
    <TD 
    style="BORDER-RIGHT: solid; BORDER-TOP: solid; BORDER-LEFT: solid; BORDER-BOTTOM: solid" 
    width="16%">&nbsp;</TD>
    <TD 
    style="BORDER-RIGHT: solid; BORDER-TOP: solid; BORDER-LEFT: solid; BORDER-BOTTOM: solid" 
    width="17%">&nbsp;</TD>
    <TD 
    style="BORDER-RIGHT: solid; BORDER-TOP: solid; BORDER-LEFT: solid; BORDER-BOTTOM: solid" 
    width="17%">&nbsp;</TD>
    <TD 
    style="BORDER-RIGHT: solid; BORDER-TOP: solid; BORDER-LEFT: solid; BORDER-BOTTOM: solid" 
    width="17%">&nbsp;</TD>
    <TD 
    style="BORDER-RIGHT: medium none; BORDER-TOP: medium none; BORDER-LEFT: medium none; BORDER-BOTTOM: medium none" 
    width="17%">&nbsp;</TD></TR>
  <TR>
    <TD 
    style="BORDER-RIGHT: solid; BORDER-TOP: solid; BORDER-LEFT: solid; BORDER-BOTTOM: solid" 
    width="16%">&nbsp;</TD>
    <TD 
    style="BORDER-RIGHT: solid; BORDER-TOP: solid; BORDER-LEFT: solid; BORDER-BOTTOM: solid" 
    width="17%">&nbsp;</TD>
    <TD 
    style="BORDER-RIGHT: solid; BORDER-TOP: solid; BORDER-LEFT: solid; BORDER-BOTTOM: solid" 
    width="17%">&nbsp;</TD>
    <TD 
    style="BORDER-RIGHT: solid; BORDER-TOP: solid; BORDER-LEFT: solid; BORDER-BOTTOM: solid" 
    width="17%">&nbsp;</TD>
    <TD 
    style="BORDER-RIGHT: medium none; BORDER-TOP: solid; BORDER-LEFT: solid; BORDER-BOTTOM: solid" 
    width="17%" rowSpan=2>
      <P align=center><STRONG>D</STRONG></P></TD></TR>
  <TR>
    <TD 
    style="BORDER-RIGHT: solid; BORDER-TOP: solid; BORDER-LEFT: medium none; BORDER-BOTTOM: solid" 
    width="16%" rowSpan=2>
      <P align=center><STRONG>C</STRONG></P></TD>
    <TD 
    style="BORDER-RIGHT: solid; BORDER-TOP: solid; BORDER-LEFT: solid; BORDER-BOTTOM: solid" 
    width="16%">&nbsp;</TD>
    <TD 
    style="BORDER-RIGHT: solid; BORDER-TOP: solid; BORDER-LEFT: solid; BORDER-BOTTOM: solid" 
    width="17%">&nbsp;</TD>
    <TD 
    style="BORDER-RIGHT: solid; BORDER-TOP: solid; BORDER-LEFT: solid; BORDER-BOTTOM: solid" 
    width="17%">&nbsp;</TD>
    <TD 
    style="BORDER-RIGHT: solid; BORDER-TOP: solid; BORDER-LEFT: solid; BORDER-BOTTOM: solid" 
    width="17%">&nbsp;</TD></TR>
  <TR>
    <TD 
    style="BORDER-RIGHT: solid; BORDER-TOP: solid; BORDER-LEFT: solid; BORDER-BOTTOM: solid" 
    width="16%">&nbsp;</TD>
    <TD 
    style="BORDER-RIGHT: solid; BORDER-TOP: solid; BORDER-LEFT: solid; BORDER-BOTTOM: solid" 
    width="17%">&nbsp;</TD>
    <TD 
    style="BORDER-RIGHT: solid; BORDER-TOP: solid; BORDER-LEFT: solid; BORDER-BOTTOM: solid" 
    width="17%">&nbsp;</TD>
    <TD 
    style="BORDER-RIGHT: solid; BORDER-TOP: solid; BORDER-LEFT: solid; BORDER-BOTTOM: solid" 
    width="17%">&nbsp;</TD>
    <TD 
    style="BORDER-RIGHT: medium none; BORDER-TOP: medium none; BORDER-LEFT: medium none; BORDER-BOTTOM: medium none" 
    width="17%">&nbsp;</TD></TR>
  <TR>
    <TD 
    style="BORDER-RIGHT: medium none; BORDER-TOP: medium none; BORDER-LEFT: medium none; BORDER-BOTTOM: medium none" 
    width="32%" colSpan=2>&nbsp;</TD>
    <TD 
    style="BORDER-RIGHT: solid; BORDER-TOP: solid; BORDER-LEFT: solid; BORDER-BOTTOM: medium none" 
    width="34%" colSpan=2>
      <P align=center><STRONG>B</STRONG></P></TD>
    <TD 
    style="BORDER-RIGHT: medium none; BORDER-TOP: medium none; BORDER-LEFT: medium none; BORDER-BOTTOM: medium none" 
    width="17%">&nbsp;</TD>
    <TD 
    style="BORDER-RIGHT: medium none; BORDER-TOP: medium none; BORDER-LEFT: medium none; BORDER-BOTTOM: medium none" 
    width="17%">&nbsp;</TD></TR></TBODY></TABLE>
<P>(ii) Mark the areas represented by the terms in the expression above. </P>
<P>(iii) Implement the expression directly in Sum-of-Products, using invertors, AND
gates and OR gates. </P>
<P>(iv) Indicate any potential hazards on the Karnaugh map (assuming only 
one-bit-at-a-time transitions); show on the Karnaugh map how they may be 
eliminated; and revise the gate-level logic diagram accordingly. </P>
<P>&nbsp; </P>
</BODY></HTML>
